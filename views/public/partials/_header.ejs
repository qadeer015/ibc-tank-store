<!-- views/partials/_header.ejs -->
<nav class="navbar navbar-expand-lg navbar-dark mx-lg-5 p-0 position-sticky top-0 z-3">
  <div class="container bg-dark p-2 rounded px-4">
    <a class="navbar-brand" href="/">IBC TANK STORE</a>
    <ul class="navbar-nav ms-auto flex-row gap-2">
      <li class="nav-item"><a class="nav-link" href="/products">Products</a></li>
      <li class="nav-item">
        <% if (typeof user !=='undefined' && user) { %>
          <div class="user-profile dropdown">
            <button class="bg-transparent border-0 outline-0 d-flex align-items-center" type="button">
              <% if (user.profile_photo) { %>
                <img src="<%= user.profile_photo %>" alt="<%= user.name %>'s profile photo" class="rounded-circle"
                  width="40" height="40">
                <% } else { %>
                  <span
                    class="rounded-circle bg-secondary text-white d-inline-flex align-items-center justify-content-center"
                    style="width:40px; height:40px;">
                    <%= user.name.charAt(0).toUpperCase() %>
                  </span>
                  <% } %>
            </button>
            <ul class="dropdown-menu dropdown-menu-end shadow">
              <li>
                <div class="dropdown-item fw-semibold">
                  <%= user.name %>
                </div>
              </li>
              <%if(user.role==='admin' ){ %>
                <li>
                  <a href="/admin/dashboard" class="dropdown-item">Dashboard</a>
                </li>
                <%}%>
                  <li>
                    <form action="/auth/logout" method="POST">
                      <input type="hidden" name="_method" value="DELETE">
                      <button type="submit" class="dropdown-item">Sign out</button>
                    </form>
                  </li>
            </ul>
          </div>
          <% } else { %>
            <button class="nav-link text-white bg-transparent border-0" onclick="showAuthModal()">Sign in</button>
            <% } %>
      </li>
    </ul>
  </div>
</nav>