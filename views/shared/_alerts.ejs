<!-- views/shared/_alerts.ejs -->
<% if (typeof error !=='undefined' && error.length> 0) { %>
    <script type="application/json" id="error-flash">
        <%- JSON.stringify(error) %>
    </script>
<% } %>

<% if (typeof success !=='undefined' && success.length> 0) { %>
    <script type="application/json" id="success-flash">
        <%- JSON.stringify(success) %>
  </script>
<% } %>

<script>
    const showFlash = (id, type) => {
        const el = document.getElementById(id);
        if (!el) return;
        console.log('showFlash');
        const data = JSON.parse(el.textContent);
        if (Array.isArray(data)) {
            data.forEach(msg => new Notification(msg, type));
        } else {
            new Notification(data, type);
        }
    };
    showFlash('error-flash', 'danger');
    showFlash('success-flash', 'success');
</script>